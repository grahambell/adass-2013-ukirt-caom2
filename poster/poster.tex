\documentclass[a0paper,portrait]{baposter}
\usepackage{relsize}
\usepackage{mathpazo}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{siunitx}

\definecolor{u2cgreen}{RGB}{0,60,0}
\definecolor{u2cyellow}{RGB}{255,255,0}
\definecolor{u2cltyellow}{RGB}{255,255,255}

\setitemize[0]{leftmargin=10pt,labelindent=0pt}
%\setenumerate[0]{leftmargin=15pt,itemindent=0pt}

\begin{document}
\begin{poster}{
    columns=3,
    background=none,
    eyecatcher=false,
    textborder=roundedsmall,
    headerborder=closed,
    headershape=smallrounded,
    headershade=shadeTB,
    boxshade=none,
    borderColor=u2cgreen,
    headerColorOne=u2cltyellow,
    headerColorTwo=u2cyellow,
    linewidth=1
}{

}{\raggedright \smaller
A New Archive of UKIRT Legacy Data at CADC
}{
\vspace{0.1cm} \\
Graham Bell$^1$, Malcolm Currie$^1$, Russell Redman$^2$, Maren Purves$^1$, Tim Jenness$^{1,3}$
\vspace{0.1cm} \\
\smaller[2]
\textsl{$^1$ Joint Astronomy Centre, Hilo HI} \\
\textsl{$^2$ Canadian Astronomy Data Centre, Victoria BC} \\
\textsl{$^3$ Cornell University, Ithaca NY}
}{
\begin{tabular}{r}
\includegraphics[width=2cm]{jaclogo} \\
\includegraphics[width=4cm]{stfclogo}
\end{tabular}
}

\headerbox{Introduction}{name=intro,column=0,row=0}{
    \raggedright
    A new archive of raw data from the United Kingdom Infrared
    Telescope (UKIRT) is being constructed at the Canadian Astronomy
    Data Centre (CADC).

    \begin{itemize}
        \item Excludes data from
        the Wide Field Camera (WFCAM),
        since it is already available
        in the WFCAM Science Archive in
        Edinburgh.

    \end{itemize}

    \includegraphics[scale=0.5]{../gfx/flow-crop}

    \quad

    \begin{centering}
    \begin{tabular}{ll}
    Total number of observations: & 1,182,507 \\
    Raw data size: & 2.147\,GiB
    \end{tabular}
    \end{centering}

    \vspace{3.5in}
}

\headerbox{CAOM-2}{name=caom2,column=1,row=0}{
    \raggedright

     CAOM-2 is the next generation of the
     Common Archive Observation Model
     currently being developed at CADC.

     \begin{itemize}
         \item Standardizes the core parts of the achive
               between various ``collections''.

         \item UKIRT added as a new collection.

         \item Includes raw and reduced data.

         \item Uses a single ``advanced search'' interface for all collections.
     \end{itemize}
}

\headerbox{E-Transfer to CADC}{name=etransfer,column=1,span=2,below=caom2}{
    \raggedright

    \begin{itemize}
    \item Data archived in as close to its original raw format as possible.

    \item Filenames standardized following our current convention.

    \item Minor changes made to files as they were staged for transfer,
    depending on format:
    \end{itemize}

    \begin{centering}
    \begin{tabular}{p{1.8in} p{1.8in} p{1.8in}}
    \textbf{FITS} & \textbf{NDF} & \textbf{DST} \\

    \raggedright
    Header fixes to pass \texttt{fitsverify},
    e.g. removal of trailing \texttt{Z} in date headers.

    &

    \raggedright
    If multiple integrations are separate files,
    store in an HDS container file.
    %with a standardized filename.

    &

    \raggedright
    Rearrange to NDF format.

    \raggedright
    Store multiple integrations in HDS container files.

    \end{tabular}
    \end{centering}

    \smaller[2]
    \textbf{HDS}: Starlink Hierarchical Data System. \\
    \textbf{NDF}: Starlink Extensible N-Dimensional Data Format (an HDS format). \\
    \textbf{DST}: Figaro Format (an HDS format). \\
}

\headerbox{UKIRT Instruments}{name=inst,column=2,row=0,above=etransfer}{
    \raggedright
    The archive contains data from UKIRT's cassegrain instruments:

    {\center
    \begin{tabular}{cc}
    \bf CGS3                                           & \bf Michelle                                              \\
    \smaller[2] 10--\SI{20}{\micro\meter} spectrometer & \smaller[2] 8--\SI{25}{\micro\meter} imager/spectrometer  \\
                                                       &                                                           \\
    \bf CGS4                                           & \bf UFTI                                                  \\
    \smaller[2] 1--\SI{5}{\micro\meter} spectrometer   &  \smaller[2] 1--\SI{2.5}{\micro\meter} imager             \\
                                                       &                                                           \\
    \bf IRCAM                                          & \bf UIST                                                  \\
    \smaller[2] 1--\SI{5}{\micro\meter} imager         & \smaller[2] 1--\SI{5}{\micro\meter} imager/spectrometer   \\
    \end{tabular}}
}

\headerbox{Pipeline}{name=pipeline,column=0,span=2,below=intro,above=bottom}{
    \raggedright

    \begin{itemize}
    \item Generate reduced data products. Use same infrastructure at CADC for JSA to generate reduced products.
    \end{itemize}

    \vspace{1.5in}
}

\headerbox{Example}{name=example,column=2,below=intro,above=bottom}{
    \raggedright

    \includegraphics[scale=0.35,angle=270]{../gfx/hh111}

    Example IRCAM image of HH\,111 from 1997.

    i,o files merged.

    Grouping and recipe headers deduced.

    Processed with JITTER\_SELF\_FLAT ORAC-DR recipe.
}

\headerbox{Generation of CAOM-2 Metadata}{name=ingestion,column=1,span=2,below=etransfer, above=pipeline}{
    \raggedright

    Size of header database: 3.755\,GiB

    MongoDB intermediate database: \qquad \qquad
    CAOM-2 XML representation:

\begin{tikzpicture}
\draw node[text width=2.5in, text ragged, font=\tiny, draw] (mongo) {
\{ \\
        "\_id" :      ObjectId("5176688af9f5db5f13b83ee0"), \\
        "group" :    null, \\
        "filename" : "i19971214\_00010.sdf", \\
        "headers" : [ \\
                \{ \\
                        "AMSTART" :  1.047529, \\
                        "AMEND" :    1.047529, \\
                        "INSTRUME" : "IRCAM3", \\
                        "MODE" :     "ND\_STARE", \\
                        "OBJECT" :   "HH111", \\
                        "OBSTYPE" :  "OBJECT", \\
                        // ... \\
                \}, \\
                \{ \\
                        "INTNUM" :   1, \\
                        "RUTEND" :   10.92177, \\
                        "RUTSTART" : 10.90462, \\
                        // ... \\
                \} \\
        ], \\
        "obs" :      10, \\
        "rawfiles" : [ \\
                "19971214/odir/o971214\_10.sdf", \\
                "19971214/idir/i971214\_10\_1.sdf" \\
        ], \\
        "utdate" :   "19971214", \\
\}
};
\draw node[text width=3.0in, text ragged, font=\tiny, draw, right of=mongo, node distance=3.0in] {
<caom2:Observation> \\
  <caom2:collection>UKIRT</caom2:collection> \\
  <caom2:observationID>i19971214\_00010</caom2:observationID> \\
  <caom2:metaRelease>1998-12-14T00:00:00.000</caom2:metaRelease> \\
  <caom2:sequenceNumber>10</caom2:sequenceNumber> \\
  <caom2:algorithm> \\
    <caom2:name>exposure</caom2:name> \\
  </caom2:algorithm> \\
  <caom2:type>object</caom2:type> \\
  <caom2:intent>science</caom2:intent> \\
  <caom2:target> \\
    <caom2:name>HH111</caom2:name> \\
  </caom2:target> \\
  <caom2:telescope> \\
    <caom2:name>UKIRT</caom2:name> <!-- ... --> \\
  </caom2:telescope> \\
  <caom2:instrument> \\
    <caom2:name>IRCAM</caom2:name> \\
    <caom2:keywords> \\
      pol=false magnifier=out detector\_mode=nd\_stare \\
    </caom2:keywords> \\
  </caom2:instrument> \\
  <caom2:environment> \\
    <caom2:elevation>72.674337141</caom2:elevation> \\
  </caom2:environment> \\
  <caom2:planes> <!-- ... --> </caom2:planes> \\
</caom2:Observation>
};
\end{tikzpicture}
}

\end{poster}
\end{document}
